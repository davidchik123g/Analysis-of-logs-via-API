## Анализ логов через API

Данный проект предоставляет API для анализа логов, хранящихся в базе данных MySQL. API позволяет фильтровать логи по IP-адресам и диапазонам дат. Он состоит из следующих файлов:

## Файлы

API.py: Этот файл содержит Flask-приложение, которое служит в качестве API. Он предоставляет конечную точку /logs для получения данных логов в формате JSON. API подключается к базе данных MySQL и выполняет SQL-запросы для фильтрации логов по IP-адресам и диапазонам дат.

bd.py: В этом файле содержатся функции для взаимодействия с базой данных MySQL. Он включает функцию view_logs, которая извлекает данные логов из базы данных с возможностью фильтрации по IP-адресам и диапазонам дат.

config.py: Этот файл содержит функцию read_config для чтения настроек из файла. Он использует модуль configparser для разбора файлов конфигурации в формате INI.

main.py: Этот файл отвечает за разбор файлов логов и сохранение данных логов в базе данных MySQL. Он также включает функцию view_logs для извлечения данных логов из базы данных с возможностью фильтрации.

## Предварительная настройка

Перед запуском API или разбором файлов логов убедитесь, что у вас есть следующее:

Установлен Python 3.x
Установлен и запущен сервер MySQL
Установлены необходимые пакеты Python (Flask, mysql-connector-python, configparser)

## Установка и использование

Установите необходимые пакеты Python, выполнив следующую команду:

```
pip install flask mysql-connector-python configparser
```

Создайте базу данных MySQL и настройте необходимые таблицы. Вы можете использовать предоставленное SQL-выражение в файле main.py для создания необходимой таблицы access_logs.

Обновите данные подключения в файлах API.py, bd.py и main.py. Измените следующие параметры, чтобы они соответствовали конфигурации вашего сервера MySQL:

host: Имя хоста или IP-адрес сервера MySQL.
user: Имя пользователя для сервера MySQL.
password: Пароль для сервера MySQL.
database: Имя базы данных MySQL.

Запустите файл main.py, чтобы разобрать файлы логов и сохранить данные в базе данных MySQL. Обновите переменную log_file в main.py с путем к вашему файлу логов.

Запустите файл API.py, чтобы запустить Flask-сервер API. API будет доступно по адресу http://localhost:5000/logs. Вы можете использовать различные параметры, такие как ip, start_date и end_date, чтобы фильтровать логи пример:http://localhost:5000/logs?ip=83.149.9.216 или http://localhost:5000/logs?start_date=2006-07-28&end_date=2023-12-31.

Вы также можете использовать функцию view_logs в файлах bd.py и main.py для просмотра данных логов с фильтрацией. Можно передать параметры filter_ip, filter_start_date и filter_end_date для применения фильтрации.

## Конфигурация

API и скрипты разбора логов используют файл конфигурации config.json для хранения информации о подключении и других настройках. Убедитесь, что вы обновили файл конфигурации с информацией о вашем сервере MySQL. Формат файла config.json должен выглядеть следующим образом:

```
{
  "database": {
    "host": "127.0.0.1",
    "user": "root",
    "password": "Pa$$w0rd",
    "name": "Python_Practice"
  }
}
```

Измените значения полей host, user, password и name в соответствии с вашей конфигурацией сервера MySQL.

#Лицензия

Данный проект лицензирован под лицензией MIT. См. файл LICENSE для получения дополнительной информации.
